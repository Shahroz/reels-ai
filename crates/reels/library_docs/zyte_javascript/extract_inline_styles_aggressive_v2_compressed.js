!function(){let e=document.getElementsByTagName("*"),t=new WeakMap,r={},l=["color","background-color"];function o(e,l,o){if(r[l]?.includes(o))return!1;let s=e.parentElement;for(;s;){let n=t.get(s);if(n||(n=window.getComputedStyle(s),t.set(s,n)),n.getPropertyValue(l)!==o)return!0;s=s.parentElement}return!1}Array.from(e).reverse().forEach(e=>{let t=e.tagName.toLowerCase();if("script"===t||"style"===t||!e.style)return;let r=window.getComputedStyle(e),l={};for(let s of r)try{let n=r.getPropertyValue(s);o(e,s,n)&&(l[s]=n)}catch(a){console.warn(`Couldn't process property ${s} on element`,e)}for(let[c,y]of(e.removeAttribute("style"),e.removeAttribute("class"),Object.entries(l)))e.style.setProperty(c,y)}),Array.from(e).forEach(e=>{if(!e.style)return;let t=Array.from(e.style);t.forEach(t=>{if(l.includes(t))return;let r=e.style.getPropertyValue(t),o=window.getComputedStyle(e).getPropertyValue(t);e.style.removeProperty(t),e.offsetHeight;let s=window.getComputedStyle(e).getPropertyValue(t);o!==s&&e.style.setProperty(t,r)})});let s=[];if(document.querySelectorAll("style").forEach(e=>{try{let t=e.sheet;if(t&&t.cssRules)for(let r of t.cssRules)r.type===CSSRule.FONT_FACE_RULE?s.push(r.cssText):":root"===r.selectorText&&-1!==r.cssText.indexOf("--")&&s.push(r.cssText)}catch(l){let o=e.textContent,n=o.match(/@font-face\s*\{[^}]+\}/g);n&&s.push(...n);let a=o.match(/:root\s*\{[^}]+\}/g);a&&a.forEach(e=>{-1!==e.indexOf("--")&&s.push(e)})}}),document.querySelectorAll("style, script").forEach(e=>e.remove()),s.length>0){let n=document.createElement("style");n.textContent=s.join("\n"),document.head.appendChild(n)}console.log("Optimized inline styles applied, custom fonts and CSS variables preserved, and all <style> and <script> tags removed.")}();